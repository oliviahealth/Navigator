// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum YesNo {
  Yes
  No
}

model User {
  id           String   @id @default(uuid())
  name         String
  email        String   @unique
  password     String
  dateCreated  DateTime @default(now())
  dateModified DateTime @updatedAt

  CommunicationLog                     CommunicationLog[]
  AppointmentLog                       AppointmentLog[]
  EnrollmentForm                       EnrollmentForm[]
  MediaAppearanceForm                  MediaAppearanceForm[]
  ParticipantDemographicsForm          ParticipantDemographicsForm[]
  ParticipantRecordForOthersInvolvedForm ParticipantRecordForOthersInvolvedForm[]
  ChildDemographicsRecord                ChildDemographicsRecord[]
  SupportSystemsForm                     SupportSystemsForm[]
  CurrentLivingArrangement    CurrentLivingArrangement[]
  ChildrenNeedsForm           ChildrenNeedsForm[]
}

enum CommunicationMethod {
  Phone
  Mail
  In_Person
  Video_Call
  Other
}

model CommunicationEntry {
  id String @id @default(uuid())

  communicationLogId String

  dateTime           DateTime
  method             CommunicationMethod
  organizationPerson String
  purpose            String
  notes              String?
  followUpNeeded     YesNo

  communicationLog CommunicationLog @relation(fields: [communicationLogId], references: [id], onDelete: Cascade)
}

model CommunicationLog {
  id String @id @default(uuid())

  User   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId String

  communicationEntries CommunicationEntry[]

  dateCreated  DateTime @default(now())
  dateModified DateTime @updatedAt
}

model AppointmentEntry {
  id String @id @default(uuid())

  appointmentLogId String

  dateTime DateTime
  who      String
  location String
  notes    String?

  appointmentLog AppointmentLog @relation(fields: [appointmentLogId], references: [id], onDelete: Cascade)
}

model AppointmentLog {
  id String @id @default(uuid())

  User   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId String

  appointmentEntries AppointmentEntry[]

  dateCreated  DateTime @default(now())
  dateModified DateTime @updatedAt
}

model EmergencyContact {
  id String @id @default(uuid())

  enrollmentFormId String

  name         String
  relationship String
  telephone    String
  email        String

  enrollmentForm EnrollmentForm @relation(fields: [enrollmentFormId], references: [id], onDelete: Cascade)
}

model EnrollmentForm {
  id String @id @default(uuid())

  User   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId String

  firstName         String
  lastName          String
  address           String
  city              String
  state             String
  zip               String
  homePhone         String
  cellPhone         String
  email             String
  dateOfBirth       DateTime
  emergencyContacts EmergencyContact[]
  clientName        String
  clientDate        DateTime
  guardianName      String
  guardianDate      String
  gcMomsName        String
  gcMomsDate        String

  dateCreated  DateTime @default(now())
  dateModified DateTime @updatedAt
}

model MediaAppearanceForm {
  id String @id @default(uuid())

  User   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId String

  participantName String
  address         String
  participantDate DateTime
  guardianName    String?
  guardianDate    DateTime?

  dateCreated  DateTime @default(now())
  dateModified DateTime @updatedAt
}

enum Gender {
  Female
  Male
}

enum Ethnicity {
  Hispanic_or_Latinx
  Not_Hispanic_or_Latinx
}

enum Race {
  American_Indian_Alaska_Native
  Asian
  Black_or_African_American
  Native_Hawaiian_or_Pacific_Islander
  White
  More_than_one_race_not_specified
  Declined_to_identify
}

enum PregnancyStatusAtEnrollment {
  Pregnant
  Not_Pregnant
  NA_Male_Participiant
}

enum MaritalStatus {
  Married
  Not_married_but_living_together
  Never_married_and_not_living_with_partner
  Separated_or_Divorced
  Widowed
}

enum LgbtqiPlus {
  LGBTQI
  Non_LGBTQI
}

enum Insurance {
  Employer_insurance
  Self_pay
  Dual_Eligibile_Medicaid_Medicare
  Medicaid_CHIP_only
  Medicare_only
  Medicare_plus_supplemental
  TriCARE
  Other_third_party_privately_insured
  Uninsured
}

model ParticipantDemographicsForm {
  id String @id @default(uuid())

  User   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId String

  programStartDate            DateTime
  caseId                      String
  homeVisitorAssigned         String
  participantName             String
  participantDateOfBirth      DateTime
  participantAddress          String
  participantZipCode          String
  participantPhoneNumber      String
  gender                      Gender
  ethnicity                   Ethnicity
  race                        Race
  primaryLanguage             String
  pregnancyStatusAtEnrollment PregnancyStatusAtEnrollment
  maritalStatus               MaritalStatus
  lgbtqiPlus                  LgbtqiPlus
  insurance                   Insurance
  childAbuse                  YesNo
  substanceAbuse              YesNo
  tobaccoUse                  YesNo
  lowStudentAchievement       YesNo
  developmentalDelay          YesNo
  USArmedForces               YesNo
  reenrollmentWithGap         YesNo
  transferFromAnotherSite     YesNo

  dateCreated  DateTime @default(now())
  dateModified DateTime @default(now())
}

// Tab 2: ParticipantRecordForOthersInvolved
enum LivingArrangements {
  Rent_Own_a_Home
  Living_with_Relatives_or_Friends
  Residential_Treatment_Center
  Correctional_Facility
  Emergency_Shelter
  Homeless
  Other
}

enum ParticipantRecordForOthersInvolvedMaritalStatus {
  Single
  Married
  Divorced
  Widowed
  Separated
}

enum DeliveryMode {
  Vaginal
  Cesarean
}

model ParticipantRecordForOthersInvolvedEntry {
  id String @id @default(uuid())

  participantRecordForOthersInvolvedFormId String

  name                         String
  dateOfBirth                  DateTime
  currentLivingArrangement     LivingArrangements
  streetAddress                String
  city                         String
  state                        String
  zipCode                      String
  county                       String
  primaryPhoneNumber           String
  emergencyContact             String
  emergencyContactPhone        String
  emergencyContactRelationship String
  maritalStatus                ParticipantRecordForOthersInvolvedMaritalStatus
  insurancePlan                String
  effectiveDate                DateTime
  subscriberId                 String
  groupId                      String
  gestationalAge               String
  dueDate                      DateTime
  deliveryDate                 DateTime
  plannedModeDelivery          DeliveryMode
  actualModeDelivery           DeliveryMode
  attendedPostpartumVisit      String
  postpartumVisitLocation      String?
  postpartumVisitDate          DateTime?
  totalNumPregnancies          String
  numLiveBirths                String
  numChildrenWithMother        String
  priorComplications           String?
  ongoingMedicalProblems       String

  participantRecordForOthersInvolvedForm ParticipantRecordForOthersInvolvedForm @relation(fields: [participantRecordForOthersInvolvedFormId], references: [id], onDelete: Cascade)
}

model ParticipantRecordForOthersInvolvedForm {
  id String @id @default(uuid())

  User   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId String

  participantRecordForOthersInvolvedEntries ParticipantRecordForOthersInvolvedEntry[]

  dateCreated  DateTime @default(now())
  dateModified DateTime @updatedAt
}

enum Sex {
  Female
  Male
}

enum ChildLivingWith {
  Mother
  Father
  Grandparents
  Siblings
  Foster_Family
  Other
}

enum childProtectiveService {
  Currently
  Previously
  Never
}

model ChildDemographicsRecord {
  id String @id @default(uuid())

  User   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId String

  childName                    String
  dateOfBirth                  DateTime
  sex                          Sex
  childLivingWith              ChildLivingWith[]
  childLivingWithOther         String?
  parentOneName                String
  parentOneInvolvedInLife      YesNo
  parentTwoName                String
  parentTwoInvolvedInLife      YesNo
  insurancePlan                String
  effectiveDate                DateTime
  subscriberId                 String
  groupId                      String
  primaryCareProvider          String
  primaryCareProviderPhone     String
  birthWeight                  String
  gestationalAgeAtBirth        String
  nicuStay                     YesNo
  nicuStayLength               String?
  prenatalDrugExposure         YesNo
  prenatalDrug                 String?
  medicalComplicationsAtBirth  String
  ongoingMedicalIssues         String
  ongoingMedications           String
  healthConcerns               String
  difficultiesServicesReceived String
  lactationConsultant          YesNo
  legalSystemInvolvement       YesNo
  childProtectiveService       childProtectiveService
  caseworker                   String?
  caseworkerPhoneNumber        String?
  importantInformation         String?

  dateCreated  DateTime @default(now())
  dateModified DateTime @default(now())
}

model SupportSystemsForm {
  id String @id @default(uuid())

  User   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId String

  currentSupportSystem String
  strengths            String
  areasForImprovement  String
  goals                String

  dateCreated  DateTime @default(now())
  dateModified DateTime @default(now())
}

model CurrentLivingArrangement {
  id String @id @default(uuid())

  User   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId String

  listPeopleLivingWithPatient      Json
  listChildrenNotLivingWithPatient Json
  notes                            String?

  dateCreated  DateTime @default(now())
  dateModified DateTime @updatedAt
}

enum ChildrenNeedsStatus {
  Yes
  No
  Pending
}

model ChildrenNeedsForm {
  id String @id @default(uuid())

  User   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId String

  breastPump                   ChildrenNeedsStatus
  breastPumpNotes              String?
  breastfeedingSupport         ChildrenNeedsStatus
  breastfeedingSupportNotes    String?
  carSeat                      ChildrenNeedsStatus
  carSeatNotes                 String?
  childcare                    ChildrenNeedsStatus
  childcareNotes               String?
  clothing                     ChildrenNeedsStatus
  clothingNotes                String?
  bed                          ChildrenNeedsStatus
  bedNotes                     String?
  diapers                      ChildrenNeedsStatus
  diapersNotes                 String?
  infantFormula                ChildrenNeedsStatus
  infantFormulaNotes           String?
  infantStroller               ChildrenNeedsStatus
  infantStrollerNotes          String?
  schoolSupplies               ChildrenNeedsStatus
  schoolSuppliesNotes          String?
  specializedMedEquipment      ChildrenNeedsStatus
  specializedMedEquipmentNotes String?
  other                        Json
  notes                        String?

  dateCreated  DateTime @default(now())
  dateModified DateTime @updatedAt
}
